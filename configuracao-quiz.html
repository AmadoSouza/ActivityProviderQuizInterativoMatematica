!DOCTYPE html>
<html>
<head>
  <title>Configuração do Quiz de Matemática</title>
</head>
<body>
  <form id="configForm">
    <label for="nivel_dificuldade">Nível de Dificuldade:</label>
    <input type="text" id="nivel_dificuldade" name="nivel_dificuldade"><br><br>
    <label for="topicos">Tópicos:</label>
    <input type="text" id="topicos" name="topicos"><br><br>
    <input type="submit" value="Salvar">
  </form>

  <div id="result"></div>

  <script>
    document.getElementById('configForm').addEventListener('submit', function(event) {
      event.preventDefault();
      
      const nivelDificuldade = document.getElementById('nivel_dificuldade').value;
      const topicos = document.getElementById('topicos').value;

      const configData = {
        nivel_dificuldade: nivelDificuldade,
        topicos: topicos
      };

      fetch('/deploy-quiz', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(configData)
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Erro na resposta do servidor');
        }
        return response.json();
      })
      .then(data => {
        console.log('Success:', data);
        document.getElementById('result').innerHTML = `Configuração salva com sucesso! Link do quiz: <a href="${data.quizURL}" target="_blank">${data.quizURL}</a>`;
      })
      .catch((error) => {
        console.error('Error:', error);
        alert('Ocorreu um erro ao salvar a configuração.');
      });
    });
  </script>
</body>
</html>
